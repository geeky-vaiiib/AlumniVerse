"use strict";(()=>{var e={};e.id=853,e.ids=[853],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2615:e=>{e.exports=require("http")},5240:e=>{e.exports=require("https")},8621:e=>{e.exports=require("punycode")},6162:e=>{e.exports=require("stream")},7360:e=>{e.exports=require("url")},1568:e=>{e.exports=require("zlib")},5228:(e,r,s)=>{s.r(r),s.d(r,{originalPathname:()=>S,patchFetch:()=>m,requestAsyncStorage:()=>f,routeModule:()=>d,serverHooks:()=>_,staticGenerationAsyncStorage:()=>E});var t={};s.r(t),s.d(t,{GET:()=>c,POST:()=>p});var o=s(3278),n=s(5002),a=s(4877),i=s(5932),u=s(1309);let l=(0,i.eI)("https://flcgwqlabywhoulqalaz.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY);async function p(e){try{if(!process.env.SUPABASE_SERVICE_ROLE_KEY)return console.error("Missing Supabase environment variables"),u.NextResponse.json({error:"Server configuration error - missing Supabase credentials"},{status:500});let{auth_id:r,email:s,first_name:t,last_name:o,usn:n,branch:a,branch_code:i,admission_year:p,passing_year:c}=await e.json();if(!r||!s)return u.NextResponse.json({error:"auth_id and email are required"},{status:400});console.log("Creating profile for user:",{auth_id:r,email:s});let{data:d,error:f}=await l.from("users").insert({auth_id:r,email:s,first_name:t||null,last_name:o||null,usn:n||null,branch:a||null,branch_code:i||null,admission_year:p||null,passing_year:c||null,is_email_verified:!0,profile_completed:!1,password_hash:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(f){if(console.error("Supabase insert error:",f),"23505"===f.code)return u.NextResponse.json({error:"Profile already exists for this user"},{status:409});return u.NextResponse.json({error:f.message},{status:400})}console.log("Profile created successfully:",d.id);let{password_hash:E,..._}=d;return u.NextResponse.json({success:!0,message:"Profile created successfully",data:_})}catch(e){return console.error("API Error:",e),u.NextResponse.json({error:"Internal Server Error"},{status:500})}}async function c(){return u.NextResponse.json({error:"Method not allowed"},{status:405})}process.env.SUPABASE_SERVICE_ROLE_KEY||console.error("Missing required environment variables:",{SUPABASE_URL:!0,SERVICE_ROLE_KEY:!!process.env.SUPABASE_SERVICE_ROLE_KEY});let d=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/profile/create/route",pathname:"/api/profile/create",filename:"route",bundlePath:"app/api/profile/create/route"},resolvedPagePath:"/Users/vaibhavjp/Downloads/AlumniVerse/app/api/profile/create/route.js",nextConfigOutput:"",userland:t}),{requestAsyncStorage:f,staticGenerationAsyncStorage:E,serverHooks:_}=d,S="/api/profile/create/route";function m(){return(0,a.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:E})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[787,833,932],()=>s(5228));module.exports=t})();